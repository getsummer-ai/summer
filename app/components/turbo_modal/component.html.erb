<div
  data-controller="turbo-modal"
  data-turbo-modal-allow-redirect-value="<%= @redirect_following %>"
  data-turbo-modal-allow-hash-changes-value="<%= @allow_hash_changes %>"
  data-action="turbo:submit-end->turbo-modal#submitEnd
              turbo:before-stream-render->turbo-modal#beforeStreamRender
              keyup@window->turbo-modal#closeOnEscape
              turbo-modal:click:outside->turbo-modal#closeModal"
  class="relative z-50"
  aria-labelledby="modal-title"
  role="dialog"
  aria-modal="true"
>
  <div class="fixed inset-0 bg-black bg-opacity-75"></div>
  <div class="fixed inset-0 z-50 w-screen overflow-y-auto">
    <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
      <%
        size_classes = {
          'sm': 'sm:max-w-md lg:max-w-sm',
          'md': 'sm:max-w-md lg:max-w-lg',
          'lg': 'sm:max-w-lg lg:max-w-xl',
        }

        size_class = size_classes[@size.to_sym] || size_classes[:sm]

      %>
      <div
        data-turbo-modal-target="modal"
        class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full <%=size_class %>"
      >
        <div class="bg-white">
          <div class="card">
            <div class="card-body">
              <% if @go_back_path.present? %>
                <div class="mb-1.5 -mt-3 text-sm opacity-50">
                  <%=
                    link_to t('modals.shared.go_back'),
                            @go_back_path,
                            class: 'link link-hover',
                            rel: 'nofollow',
                            data: {
                              'turbo-frame': 'modal',
                            }
                  %>
                </div>
              <% end %>

              <% if @title.present? %>
                <div class="mb-2">
                  <h2 class="card-title"><%= @title %></h2>
                </div>
              <% end %>
              <%= content %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
