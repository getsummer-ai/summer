<% is_turbo = turbo_frame_request_id.present? %>
<%= turbo_conditional_tag "project-path-form", is_turbo do %>
  <%= form_for @path_form,
               url: @path_form.path.nil? ? project_paths_path : project_path_path(@current_project, @path_form),
               method: @path_form.path.nil? ? :post : :put,
               builder: DaisyBuilder do |f| %>
    <div class="form-control">
      <%= f.label :value, 'Address' %>
      <%= f.text_field :value %>
    </div>

    <% if @path_form.errors.any? %>
      <div class="text-xs mt-1">
        <% @path_form.errors.full_messages.each do |message| %>
          <div><%= message %></div>
        <% end %>
      </div>
    <% end %>

    <%= render Notice::Component.new(container_class: 'mt-6') do %>
      <div class="text-sm leading-4">
        <b>Important:</b>
        Summer will appear on every page under this domain. Make sure to use specific directory
        address, such as “domain.com/blog”, and not the main domain address only.
      </div>
    <% end %>

    <div class="form-control mt-8">
      <% unless @path_form.path.nil? %>
        <%=
          link_to 'Remove Address',
                  project_paths_path(@current_project),
                  class: 'btn btn-summer mb-2 btn-block btn-red',
                  data: {
                    'turbo-method': :delete,
                    turbo_confirm: 'Are you sure?',
                  }
        %>
      <% end %>

      <%= f.submit @path_form.path.nil? ? 'Add Domain' : 'Save', class: 'btn btn-summer btn-neutral btn-block' %>
    </div>
  <% end %>
<% end %>
