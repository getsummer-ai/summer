<h2 class="font-semibold text-xl md:text-2xl">Pages</h2>
<p class="opacity-50 mt-1">
  Summer will appear on all the pages from your domain link with more than 500 symbols. Each page is
  added to the list after the first Summer appearance. Turn Summer on and off manually per page if
  needed.
</p>

<%= turbo_frame_tag 'pages', 'data-turbo-action': 'advance' do %>
  <div class="flex justify-between mt-12">
    <h2 class="font-semibold text-xl">Statistic</h2>
    <div>
      <%=
        render 'private/pages/shared/select_statistic_month_form',
               submit_url: project_pages_path(@current_project),
               statistic_months: @statistics.statistic_months,
               month: @statistics.month
      %>
    </div>
  </div>

  <div class="mt-6 rounded-xl shadow p-6 border">
    <%= render 'private/pages/shared/chart_by_days', data: @statistics.views_clicks_by_days_for_chart %>
  </div>

  <div class="grid gap-4 grid-flow-row md:grid-flow-col grid-cols-1 md:grid-cols-3 mt-12">
    <%=
      render 'private/pages/shared/metric_card',
       title: 'Summarized pages',
       icon_src: vite_asset_path('assets/icons/pages.svg'),
       number: @statistics.total_pages_count,
       comment:
         "+#{number_with_delimiter(@statistics.current_month_new_pages_count)} pages in #{@month.strftime('%B')}"
    %>
    <%=
      render 'private/pages/shared/metric_card',
       title: 'Button Showed',
       icon_src: vite_asset_path('assets/icons/eye.svg'),
       number: @statistics.total_views_count,
       comment:
         "+#{number_with_delimiter(@statistics.current_month_new_views_count)} views in #{@month.strftime('%B')}"
    %>
    <%=
      render 'private/pages/shared/metric_card',
       title: 'Button Clicked',
       icon_src: vite_asset_path('assets/icons/click.svg'),
       number: @statistics.total_clicks_count,
       comment:
         "+#{number_with_delimiter(@statistics.current_month_new_clicks_count)} clicks in #{@month.strftime('%B')}"
    %>
  </div>

  <div class="mt-12">
    <%=
      render 'private/pages/index/pages_form',
       form: @form,
       show_search: @pagy.count >= 3 || @form.enabled_filters?,
       show_order: @pages.length > 0 || @form.enabled_filters?,
       show_staging_pages_checkbox:
         @current_project.domain_alias.present? || @current_project.pages.staging.exists?,
       current_project: @current_project
    %>
    <%= render 'private/pages/index/pages_table', project: @current_project, pages: @pages, pagy: @pagy %>
  </div>
<% end %>
