<h2 class="font-semibold text-[32px]">Pages</h2>
<p class="opacity-50 mt-1 text-[15px]">Gain insights on how people use Summer on Enty Blog</p>

<hr class="mt-12 mb-12" />

<h2 class="text-xl font-semibold">Project Domain</h2>
<p class="opacity-50 mt-1 text-[15px]">
  Summer will appear on the pages under this domain link.
  If you experience issues with the domain or want to change
  the address contact support via support@getsummer.ai
</p>

<div class="mt-7 flex justify-between bg-green-50 rounded-xl border border-green-400 p-4">
  <div><%=[@current_project.domain, @current_project.settings_url_filter.presence].compact.join('') %></div>
  <div class="text-green-500 tracking-tight">
    <span class="inline-block w-1.5 h-1.5 rounded bg-green-400 align-middle mr-0.5"></span>
    Connected
  </div>
</div>

<div class="grid gap-4 grid-flow-col grid-cols-3 mt-7">
  <%= render "private/pages/metric_card",
             title: 'Pages',
             icon_src: vite_asset_path('assets/icons/pages.svg'),
             number: @statistics.total_pages_count,
             comment: "+#{@statistics.current_month_new_pages_count} pages this month"
  %>
  <%= render "private/pages/metric_card",
             title: 'Button Showed',
             icon_src: vite_asset_path('assets/icons/eye.svg'),
             number: @statistics.total_views_count,
             comment: "+#{@statistics.current_month_new_views_count} new views this month"
  %>
  <%= render "private/pages/metric_card",
             title: 'Button Clicked',
             icon_src: vite_asset_path('assets/icons/click.svg'),
             number: @statistics.total_clicks_count,
             comment: "+#{@statistics.current_month_new_clicks_count} new clicks this month"
  %>
</div>

<% if @pages.length > 0 %>
  <hr class="mt-12 mb-12" />
  <div>
    <h2 class="text-xl font-semibold">All Pages</h2>
    <p class="opacity-50 mt-1 font-light">
      Summer is disabled on the pages with less than 500 symbols by default. You can turn it on manually.
    </p>
    <%=turbo_frame_tag 'pages', target: "_top", 'data-turbo-action': 'advance' do %>
      <div class="overflow-x-auto mt-6">
        <table class="table text-[15px] tracking-tight">
          <thead class="text-[15px]">
            <tr>
              <th class="font-semibold pl-0">Page</th>
              <th class="font-semibold w-24">Shown</th>
              <th class="font-semibold w-24">Clicked</th>
              <th class="font-semibold px-0 w-14">On/Off</th>
            </tr>
          </thead>
          <tbody>
            <% @pages.each_with_index do |page, i|%>
              <%= render ProjectPageComponents::RowComponent.new(project: @current_project, page:) %>
            <% end %>
          </tbody>
        </table>
      </div>
      <% if @pagy.pages > 1 %>
        <div class="mt-4">
          <%== pagy_nav(@pagy) %>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>
