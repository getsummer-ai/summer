<turbo-stream action="close-modal"></turbo-stream>

<%= turbo_stream.prepend "flash", partial: "shared/flash_alerts" %>

<%= turbo_stream.replace dom_id(@article_product) do %>
  <%=
    render ProjectPageProductComponents::RowComponent.new(
      project_article_product: @article_product,
      edit_path: edit_project_page_product_path(
        current_project,
        @project_page,
        @article_product
      ),
      update_path: project_page_product_path(
        current_project,
        @project_page,
        @article_product
      )
    )
  %>
<% end %>

<%=turbo_stream.replace 'preview-summary-with-article' do%>
  <% article = @project_page.article_minimal_info %>
  <%=
    render ProjectPageComponents::PreviewSummaryButtonComponent.new(
      current_project:,
      article:,
      project_page: @project_page,
      services: article.project_article_products.active.includes(:product_minimal_info).map do |article_product|
        article_product.product_minimal_info.decorate.data_for_summary_app
      end
    )
  %>
<% end %>
